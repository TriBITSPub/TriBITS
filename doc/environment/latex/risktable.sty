%%---------------------------------------------------------------------------%%
%% Defines the environment `risktable' that generates a risk table.
%% Defines the command `risk' which generates an entry in the table.
%%
%% See documentation below for more information. 
%%---------------------------------------------------------------------------%%

\RequirePackage{calc}
\RequirePackage{array}
\RequirePackage{ragged2e}

%% risktable is a 5-column table of a risk assessment.  Each risk
%% should be entered with the \risk command, described below.
\newenvironment{risktable}
       {\begin{tabular}%
            {|>{\RaggedRight}p{1.5in}|c|c|c|>{\RaggedRight}p{2.0in}|}%
            \hline%
            Risk & Likelihood & Impact & Importance & Contingency\\%
            \hline\hline%
       }
       {\end{tabular}}

%% \risk defines a row in the risktable environment.  
%%
%% The arguments are:
%%    1: Text describing risk.
%%    2: The likelihood (an integer)
%%    3: The impact (an integer)
%%    4: Text describing the contingency.
%%
%% The importance is computed as the product of the likelihood and
%% impact.
\newcounter{riskimportance}
\newcommand{\risk}[4]{#1 & #2 & #3 & 
              \setcounter{riskimportance}{#2 * #3}\theriskimportance & 
              #4 \\ \hline}

%%---------------------------------------------------------------------------%%
%% end of risktable.sty
%%---------------------------------------------------------------------------%%
